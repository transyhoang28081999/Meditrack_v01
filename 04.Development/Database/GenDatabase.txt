-- Bảng roles:
CREATE TABLE roles (
  role_id INT PRIMARY KEY,
  role_name VARCHAR(255)
);
-- Bảng users:
CREATE TABLE users (
  user_id INT PRIMARY KEY,
  user_account VARCHAR(255),
  user_created_at TIMESTAMP,
  user_email VARCHAR(255),
  user_password VARCHAR(255),
  user_status VARCHAR(50),
  user_updated_at TIMESTAMP,
  role_id INT,
  FOREIGN KEY (role_id) REFERENCES roles(role_id)
);
-- Bảng user_profiles:
CREATE TABLE user_profiles (
  up_id INT PRIMARY KEY,
  up_dob DATE,
  up_gender VARCHAR(50),
  up_idcode VARCHAR(255),
  up_name VARCHAR(255),
  up_phone VARCHAR(20),
  user_id INT,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);
-- Bảng medical_records:
CREATE TABLE medical_records (
  med_id INT PRIMARY KEY,
  med_history TEXT,
  up_id INT,
  FOREIGN KEY (up_id) REFERENCES user_profiles(up_id)
);
-- Bảng backgrounds:
CREATE TABLE backgrounds (
  med_id INT,
  bg_date DATE,
  bg_description TEXT,
  PRIMARY KEY (med_id, bg_date),
  FOREIGN KEY (med_id) REFERENCES medical_records(med_id)
);
-- Bảng appointments:
CREATE TABLE appointments (
  app_id BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  app_address VARCHAR(255),
  app_datetime DATETIME(6),
  app_description VARCHAR(255),
  app_doctorname VARCHAR(255),
  app_institute VARCHAR(255),
  app_specialization VARCHAR(255),
  app_status ENUM('CANCELED', 'COMPLETED', 'ONGOING', 'POSTPONED'),
  user_id INT,
  FOREIGN KEY (user_id) REFERENCES users(user_id)
);
-- Bảng prescriptions:
CREATE TABLE prescriptions (
  pre_id BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  pre_doctor VARCHAR(255),
  pre_dosage INT(11),
  pre_duration VARCHAR(255),
  pre_medicine VARCHAR(255),
  pre_notes VARCHAR(255)
);
-- Bảng reminders:
CREATE TABLE reminders (
  rem_id BIGINT(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  rem_datetime DATETIME(6),
  rem_message VARCHAR(255),
  rem_type VARCHAR(255),
  app_id BIGINT(20),
  pre_id BIGINT(20),
  FOREIGN KEY (app_id) REFERENCES appointments(app_id),
  FOREIGN KEY (pre_id) REFERENCES prescriptions(pre_id)
);